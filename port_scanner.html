<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>localhost Port scanning test</title>
  </head>
  <body>
<h2>Port scanning test</h2>
<button id="start">Start test</button><br>
<div id="log">
</div>
<script>
  var log = function(m,ok){
    var e = document.createElement("span")
    e.innerText = m
    if(ok === true){
      e.style.color = "green"
    }
    else{
      e.style.color = "red"
    }
    document.getElementById("log").appendChild(e)
    document.getElementById("log").appendChild(document.createElement("br"))
  }
  document.getElementById("start").onclick = async function(){
    window.p = 0;
    for(window.p = 0; window.p < 90; window.p ++){
      console.log(p,window.p)
      try{
        fetch("http://localhost:" + window.p,{mode:"no-cors"}).then(function(){log("Detected on " + p,false)},function(){log("Can not reach " + p,true)})
      }
      catch(err){
        log("Can not reach " + window.p,true)
      }
  
    }
  }
</script>
  </body>
</html>

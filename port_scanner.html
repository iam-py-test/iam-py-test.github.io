<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>localhost Port scanning test</title>
  </head>
  <body>
<h2>Port scanning test</h2>
<button id="start">Start test</button><br>
<div id="log">
</div>
<script>
  var log = function(m,ok){
    var e = document.createElement("span")
    e.innerText = m
    if(ok === true){
      e.style.color = "green"
    }
    else{
      e.style.color = "red"
    }
    document.getElementById("log").appendChild(e)
    document.getElementById("log").appendChild(document.createElement("br"))
  }
  
  var test = async function(port){
    try{
      await fetch("http://localhost:" + port)
      log("Detected on port " + port, false)
    }
    catch(err){
      log("Not detected on port " + port,true)
    }
  }
  
  document.getElementById("start").onclick = async function(){
    window.p = 0;
    for(window.p = 0; window.p < 90; window.p ++){
      console.log(p,window.p)
      try{
        test(p)
      }
      catch(err){
        log("Can not reach " + window.p,true)
      }
  
    }
  }
</script>
  </body>
</html>
